C51 COMPILER V7.06   TEXT1                                                                 12/16/2012 20:23:00 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE TEXT1
OBJECT MODULE PLACED IN Text1.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Text1.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          #include <AT89X52.h>
   2          #define uchar unsigned char
   3          #define uint unsigned int    //宏定义
   4          #define KEY P3_7      //定义画面切换按键
   5          uchar KY;    //KY作用在后面说明     
   6          uchar disp;     //显示汉字指针
   7          uchar pic=0,num=0;     //pic为按键次数；num为中断次数
   8          
   9          
  10          
  11          uchar code love[] = {
  12          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  13          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x3F,0x00,0x20,0x00,0x20,0x00,0x20,
  14          0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0x0F,
  15          0x04,0x10,0x02,0x20,0x02,0x20,0x02,0x20,0x02,0x20,0x04,0x10,0xF8,0x0F,0x00,0x00,
  16          0x00,0x00,0x00,0x00,0xFE,0x07,0x00,0x08,0x00,0x10,0x00,0x20,0x00,0x20,0x00,0x10,
  17          0x00,0x08,0xFE,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x3F,0x82,0x20,0x82,0x20,
  18          0x82,0x20,0x82,0x20,0x82,0x20,0x82,0x20,0x82,0x20,0x00,0x00,0x00,0x00,0x00,0x00,
  19          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*LOVE*/
  20          };
  21          
  22          
  23          uchar code loveyou[] = {
  24          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  25          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  26          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  27          0x78,0x00,0xFC,0x00,0xFE,0x01,0xFE,0x03,0xFE,0x07,0xFE,0x0F,0xFE,0x1F,0xFC,0x3F,
  28          0xF8,0x7F,0xFC,0x3F,0xFE,0x1F,0xFE,0x0F,0xFE,0x07,0xFE,0x03,0xFE,0x01,0xFC,0x00,
  29          0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  30          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  31          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*心形图案*/
  32          };
  33          
  34          uchar code hehe[] = {
  35          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  36          0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x01,0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
  37          0xF0,0x0F,0x08,0x10,0x04,0x20,0x00,0x00,0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
  38          0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x20,
  39          0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
  40          0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,0x00,0x00,0x00,0x00,0x04,0x20,0x08,0x10,
  41          0xF0,0x0F,0x00,0x00,0x00,0x00,0xC0,0x01,0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
  42          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*呵呵o(∩_∩)o图案*/
  43          };
  44          
  45          unsigned char code hanzi[] = {
  46                0x40,0x08,0x44,0x08,0x44,0x04,0x44,0x04,
  47                0x44,0x02,0x44,0x3E,0x7F,0x49,0xC4,0x48,
  48                0xC4,0x44,0x44,0x44,0x64,0x42,0x54,0x42,
  49                0x4E,0x40,0x44,0x70,0x40,0x00,0x00,0x00,/*"老",0*/
  50          
  51                0x00,0x40,0xFC,0x27,0x00,0x10,0x00,0x0E,
  52                0xFF,0x01,0x00,0x00,0xF2,0x0F,0x12,0x00,
  53                0x12,0x00,0x12,0x00,0xFE,0xFF,0x12,0x00,
  54                0x12,0x04,0x12,0x08,0xF2,0x07,0x00,0x00,/*"师",0*/
  55          
C51 COMPILER V7.06   TEXT1                                                                 12/16/2012 20:23:00 PAGE 2   

  56                0x10,0x80,0x10,0x43,0xF0,0x22,0x1F,0x14,
  57                0x10,0x0C,0xF0,0x73,0x80,0x20,0x82,0x00,
  58                0x82,0x40,0x82,0x80,0xF2,0x7F,0x8A,0x00,
  59                0x86,0x00,0x82,0x00,0x80,0x00,0x00,0x00,/*"好",0*/
  60          
  61                0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x5F,
  62                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  63                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  64                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"！",0*/
  65          
  66                0x20,0x22,0x30,0x23,0xAC,0x22,0x63,0x12,
  67                0x10,0x12,0x40,0x00,0x20,0x00,0x50,0x7E,
  68                0x4C,0x42,0x43,0x42,0x44,0x42,0x48,0x42,
  69                0x30,0x7E,0x60,0x00,0x20,0x00,0x00,0x00,/*"给",0*/
  70          
  71                0x00,0x00,0x80,0x00,0x80,0x00,0x40,0x00,
  72                0x20,0x00,0x10,0x00,0x0C,0x00,0xE3,0x7F,
  73                0x04,0x00,0x08,0x00,0x10,0x00,0x20,0x00,
  74                0x60,0x00,0xC0,0x00,0x40,0x00,0x00,0x00,/*"个",1*/
  75          
  76                0x10,0x08,0x61,0xF8,0x06,0x07,0xE0,0x00,
  77                0x04,0x00,0xA4,0xFF,0xA4,0x08,0xEF,0x07,
  78                0xA4,0x14,0xA4,0x08,0xE4,0x07,0xAF,0x44,
  79                0xA4,0x88,0xA4,0x7F,0x24,0x00,0x00,0x00,/*"满",2*/
  80            
  81                0x80,0x00,0x40,0x80,0x20,0x40,0x98,0x20,
  82                0x87,0x10,0x82,0x0F,0x80,0x00,0x80,0x00,
  83                0x83,0x20,0x84,0x40,0x98,0x3F,0x30,0x00,
  84                0x60,0x00,0xC0,0x00,0x40,0x00,0x00,0x00,/*"分",3*/
  85          
  86          
  87          };
  88          
  89          /*****函数声明*****/
  90          void display1_ltor(void);
  91          void display2_ltor(void);
  92          void display2_rtol(void);
  93          void display3(void);
  94          void display4(void);
  95          
  96          
  97          
  98          
  99          
 100          
 101          /*****n（us）延时子程序*****/
 102          void DelayUs(uint N)
 103          {
 104   1       uint x;
 105   1       for(x=0; x<=N;x++);
 106   1      }
 107          
 108          /*****中断服务程序*****/
 109          void intersvr0(void) interrupt 0 
 110          {
 111   1       ;
 112   1       KY=~KY;      //每个摇动来回水银开关会在摆幅两端分别产生下降沿中断，只提取其中一次（从左向右摇才显示）
 113   1       if(KY==0)
 114   1       {
 115   2         num++;     //计算中断次数
 116   2         switch(pic)      //选择画面
 117   2         {
C51 COMPILER V7.06   TEXT1                                                                 12/16/2012 20:23:00 PAGE 3   

 118   3          case 0:{display1_ltor();}break;
 119   3          case 1:{display2_ltor();}break;
 120   3          case 2:{display3();}break;
 121   3          case 3:{display4();}break;
 122   3          default:{display1_ltor();}  
 123   3         }
 124   2       }
 125   1      
 126   1      }
 127          /*****显示子程序1（汉字）*****/
 128          void display1_ltor(void)
 129          {
 130   1       uchar i;
 131   1       if(num>10){disp++;num=0;}     //每中断10次切换
 132   1       if(disp>1)disp=0;
 133   1        DelayUs(5200);     //此处延时时间依各硬件差别而各不相同，试着调整使得显示内容居中即可
 134   1       for(i=0;i<64;i++)
 135   1       {
 136   2           P0=~hanzi[disp*128+i*2];
 137   2           P2=~hanzi[disp*128+i*2+1];
 138   2           DelayUs(100);
 139   2       }
 140   1      }
 141          
 142          /*****显示子程序2（LOVE）*****/
 143          void display2_ltor(void)
 144          {
 145   1       uchar i;
 146   1       DelayUs(4000);
 147   1       for(i=0;i<64;i++) 
 148   1       {
 149   2           P0=~love[i*2];
 150   2           P2=~love[i*2+1];
 151   2           DelayUs(140);
 152   2       }
 153   1      }
 154          /*****显示子程序3（心形图案）*****/
 155          void display3(void)
 156          {
 157   1       uchar i;
 158   1        DelayUs(4000);
 159   1       for(i=0;i<64;i++)
 160   1       {
 161   2           P0=~loveyou[i*2];
 162   2           P2=~loveyou[i*2+1];
 163   2           DelayUs(120);
 164   2       }
 165   1      }
 166          
 167          /*****显示子程序4（呵呵o(∩_∩)o图案）*****/
 168          void display4(void)
 169          {
 170   1       uchar i;
 171   1       DelayUs(4000);
 172   1       for(i=0;i<64;i++)
 173   1       {
 174   2           P0=~hehe[i*2];
 175   2           P2=~hehe[i*2+1];
 176   2           DelayUs(120);
 177   2       }
 178   1      }
 179          
C51 COMPILER V7.06   TEXT1                                                                 12/16/2012 20:23:00 PAGE 4   

 180          /*****主函数*****/
 181          void main(void)
 182          {
 183   1       IT0=1;
 184   1       EX0=1;
 185   1       EA=1;      //开中断，下降沿中断
 186   1       KY=0;
 187   1       while(1)     //主程序中只检测按键
 188   1       {
 189   2        if(KEY==0)     //画面切换键按下
 190   2        {
 191   3        DelayUs(10000);     //按键去抖
 192   3        if(KEY==0);
 193   3        pic++;}
 194   2        if(pic>3)pic=0;
 195   2       }
 196   1      }
 197          /*****END*****/
 198          
 199          
 200          
 201          
 202          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    416    ----
   CONSTANT SIZE    =    640    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
