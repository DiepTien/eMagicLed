C51 COMPILER V7.06   TEXT1                                                                 01/24/2013 16:43:46 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE TEXT1
OBJECT MODULE PLACED IN Text1.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Text1.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          #include <AT89X52.h>
   2          #define uchar unsigned char
   3          #define uint unsigned int    //宏定义
   4          #define KEY P3_7      //定义画面切换按键
   5          uchar KY;    //KY作用在后面说明     
   6          uchar disp;     //显示汉字指针
   7          uchar pic=0,num=0;     //pic为按键次数；num为中断次数
   8          
   9          
  10          uchar code love[] = {
  11          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  12          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x3F,0x00,0x20,0x00,0x20,0x00,0x20,
  13          0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0x0F,
  14          0x04,0x10,0x02,0x20,0x02,0x20,0x02,0x20,0x02,0x20,0x04,0x10,0xF8,0x0F,0x00,0x00,
  15          0x00,0x00,0x00,0x00,0xFE,0x07,0x00,0x08,0x00,0x10,0x00,0x20,0x00,0x20,0x00,0x10,
  16          0x00,0x08,0xFE,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x3F,0x82,0x20,0x82,0x20,
  17          0x82,0x20,0x82,0x20,0x82,0x20,0x82,0x20,0x82,0x20,0x00,0x00,0x00,0x00,0x00,0x00,
  18          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*LOVE*/
  19          };
  20          
  21          
  22          uchar code loveyou[] = {
  23          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  24          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  25          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  26          0x78,0x00,0xFC,0x00,0xFE,0x01,0xFE,0x03,0xFE,0x07,0xFE,0x0F,0xFE,0x1F,0xFC,0x3F,
  27          0xF8,0x7F,0xFC,0x3F,0xFE,0x1F,0xFE,0x0F,0xFE,0x07,0xFE,0x03,0xFE,0x01,0xFC,0x00,
  28          0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  29          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  30          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*心形图案*/
  31          };
  32          
  33          uchar code hehe[] = {
  34          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  35          0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x01,0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
  36          0xF0,0x0F,0x08,0x10,0x04,0x20,0x00,0x00,0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
  37          0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x20,
  38          0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
  39          0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,0x00,0x00,0x00,0x00,0x04,0x20,0x08,0x10,
  40          0xF0,0x0F,0x00,0x00,0x00,0x00,0xC0,0x01,0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
  41          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*呵呵o(∩_∩)o图案*/
  42          };
  43          
  44          unsigned char code hanzi[] = {
  45          //-- 欢 --
  46                0x04,0x10,0x34,0x08,0xC4,0x06,0x04,0x01,
  47                0xC4,0x82,0x3C,0x8C,0x20,0x40,0x10,0x30,
  48                0x0F,0x0C,0xE8,0x03,0x08,0x0C,0x08,0x10,
  49                0x28,0x60,0x18,0xC0,0x00,0x40,0x00,0x00,
  50          //-- 迎 --
  51                0x40,0x00,0x42,0x40,0x44,0x20,0xC8,0x1F,
  52                0x00,0x20,0xFC,0x47,0x04,0x42,0x02,0x41,
  53                0x82,0x40,0xFC,0x7F,0x04,0x40,0x04,0x42,
  54                0x04,0x44,0xFE,0x63,0x04,0x20,0x00,0x00,
  55          //-- 使 --
C51 COMPILER V7.06   TEXT1                                                                 01/24/2013 16:43:46 PAGE 2   

  56                0x40,0x00,0x20,0x00,0xF8,0xFF,0x07,0x00,
  57                0x04,0x80,0xF4,0x43,0x14,0x45,0x14,0x29,
  58                0x14,0x19,0xFF,0x17,0x14,0x21,0x14,0x21,
  59                0x14,0x41,0xF6,0xC3,0x04,0x40,0x00,0x00,
  60          //-- 用 --
  61                0x00,0x80,0x00,0x60,0xFE,0x1F,0x22,0x02,
  62                0x22,0x02,0x22,0x02,0x22,0x02,0xFE,0x7F,
  63                0x22,0x02,0x22,0x02,0x22,0x42,0x22,0x82,
  64                0xFF,0x7F,0x02,0x00,0x00,0x00,0x00,0x00,
  65          
  66          //-- 神 --
  67                0x08,0x01,0x88,0x00,0x49,0x00,0xEE,0xFF,
  68                0x58,0x00,0x88,0x00,0x00,0x00,0xF8,0x1F,
  69                0x88,0x08,0x88,0x08,0xFF,0xFF,0x88,0x08,
  70                0x88,0x08,0xFC,0x1F,0x08,0x00,0x00,0x00,
  71          //-- 奇 --
  72                0x40,0x00,0x40,0x00,0x44,0x00,0x44,0x3E,
  73                0x64,0x12,0x54,0x12,0x4C,0x12,0x47,0x12,
  74                0x4C,0x3F,0x54,0x42,0x74,0x80,0xC6,0x7F,
  75                0x44,0x00,0x60,0x00,0x40,0x00,0x00,0x00,
  76          //-- 魔 --
  77                0x00,0x40,0x00,0x30,0xFE,0x8F,0x4A,0x80,
  78                0xAA,0x5F,0x9A,0x4A,0xFE,0x2A,0xAA,0x1A,
  79                0xCB,0x0F,0xAA,0x7A,0xFE,0x8A,0x9A,0xAA,
  80                0xAA,0x8F,0x6B,0x80,0x22,0xE0,0x00,0x00,
  81          //-- 幻 --
  82                0x80,0x20,0xC0,0x30,0xA0,0x28,0x98,0x24,
  83                0x87,0x22,0x80,0x21,0xC4,0x30,0x04,0x60,
  84                0x04,0x00,0x04,0x20,0x04,0x40,0x04,0x80,
  85                0x04,0x40,0xFE,0x3F,0x04,0x00,0x00,0x00,
  86          //-- 摇 --
  87                0x10,0x02,0x10,0x42,0x10,0x81,0xFF,0x7F,
  88                0x90,0x04,0x54,0x05,0xCC,0xF4,0xB4,0x44,
  89                0x84,0x44,0xBC,0x7F,0x82,0x44,0xA2,0x44,
  90                0x9B,0xF4,0x82,0x06,0x00,0x04,0x00,0x00,
  91          //-- 摇 --
  92                0x10,0x02,0x10,0x42,0x10,0x81,0xFF,0x7F,
  93                0x90,0x04,0x54,0x05,0xCC,0xF4,0xB4,0x44,
  94                0x84,0x44,0xBC,0x7F,0x82,0x44,0xA2,0x44,
  95                0x9B,0xF4,0x82,0x06,0x00,0x04,0x00,0x00,
  96          //-- 棒 --
  97                0x10,0x04,0x10,0x03,0xD0,0x00,0xFF,0xFF,
  98                0x90,0x00,0x54,0x05,0x44,0x12,0xD4,0x15,
  99                0x74,0x14,0x5F,0xFF,0xD4,0x14,0x54,0x15,
 100                0x56,0x12,0x44,0x06,0x40,0x02,0x00,0x00,
 101          //-- ！ --
 102                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 103                0x00,0x00,0x00,0x00,0x7C,0x10,0xFE,0x3B,
 104                0xFE,0x3B,0x7C,0x10,0x00,0x00,0x00,0x00,
 105                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
 106          };
 107          
 108          /*****函数声明*****/
 109          void display1_ltor(void);
 110          void display2_ltor(void);
 111          void display2_rtol(void);
 112          void display3(void);
 113          void display4(void);
 114          
 115          
 116          
 117          
C51 COMPILER V7.06   TEXT1                                                                 01/24/2013 16:43:46 PAGE 3   

 118          
 119          
 120          /*****n（us）延时子程序*****/
 121          void DelayUs(uint N)
 122          {
 123   1       uint x;
 124   1       for(x=0; x<=N;x++);
 125   1      }
 126          
 127          /*****中断服务程序*****/
 128          void intersvr0(void) interrupt 0 
 129          {
 130   1       ;
 131   1       KY=~KY;      //每个摇动来回水银开关会在摆幅两端分别产生下降沿中断，只提取其中一次（从左向右摇才显示）
 132   1       if(KY==0)
 133   1       {
 134   2         num++;     //计算中断次数
 135   2         switch(pic)      //选择画面
 136   2         {
 137   3              case 0:{display1_ltor();}break;
 138   3          case 1:{display2_ltor();}break;
 139   3          case 2:{display3();}break;
 140   3          case 3:{display4();}break;
 141   3          default:{display1_ltor();}  
 142   3         }
 143   2       }
 144   1      
 145   1      }
 146          /*****显示子程序1（汉字）*****/
 147          void display1_ltor(void)
 148          {
 149   1       uchar i;
 150   1       if(num>10){disp++;num=0;}     //12个汉字分为3次显示完（每次显示4个），每中断10次切换
 151   1       if(disp>2)disp=0;
 152   1        DelayUs(5200);     //此处延时时间依各硬件差别而各不相同，试着调整使得显示内容居中即可
 153   1       for(i=0;i<64;i++)
 154   1       {
 155   2           P0=~hanzi[disp*128+i*2];
 156   2           P2=~hanzi[disp*128+i*2+1];
 157   2           DelayUs(100);
 158   2       }
 159   1      }
 160          
 161          /*****显示子程序2（LOVE）*****/
 162          void display2_ltor(void)
 163          {
 164   1       uchar i;
 165   1       DelayUs(4000);
 166   1       for(i=0;i<64;i++) 
 167   1       {
 168   2           P0=~love[i*2];
 169   2           P2=~love[i*2+1];
 170   2           DelayUs(140);
 171   2       }
 172   1      }
 173          /*****显示子程序3（心形图案）*****/
 174          void display3(void)
 175          {
 176   1       uchar i;
 177   1        DelayUs(4000);
 178   1       for(i=0;i<64;i++)
 179   1       {
C51 COMPILER V7.06   TEXT1                                                                 01/24/2013 16:43:46 PAGE 4   

 180   2           P0=~loveyou[i*2];
 181   2           P2=~loveyou[i*2+1];
 182   2           DelayUs(120);
 183   2       }
 184   1      }
 185          
 186          /*****显示子程序4（呵呵o(∩_∩)o图案）*****/
 187          void display4(void)
 188          {
 189   1       uchar i;
 190   1       DelayUs(4000);
 191   1       for(i=0;i<64;i++)
 192   1       {
 193   2           P0=~hehe[i*2];
 194   2           P2=~hehe[i*2+1];
 195   2           DelayUs(120);
 196   2       }
 197   1      }
 198          
 199          /*****主函数*****/
 200          void main(void)
 201          {
 202   1       IT0=1;
 203   1       EX0=1;
 204   1       EA=1;      //开中断，下降沿中断
 205   1       KY=0;
 206   1       KEY=1;
 207   1       while(1)     //主程序中只检测按键
 208   1       {
 209   2        if(KEY==0)     //画面切换键按下
 210   2        {
 211   3           DelayUs(10000);     //按键去抖
 212   3           if(KEY==0);
 213   3           pic++;
 214   3           while(KEY==0);
 215   3        }
 216   2        if(pic>3)pic=0;
 217   2       }
 218   1      }
 219          /*****END*****/
 220          
 221          
 222          
 223          
 224          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    421    ----
   CONSTANT SIZE    =    768    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
