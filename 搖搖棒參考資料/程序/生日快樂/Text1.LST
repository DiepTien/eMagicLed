C51 COMPILER V7.06   TEXT1                                                                 03/04/2013 08:31:57 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE TEXT1
OBJECT MODULE PLACED IN Text1.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Text1.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          #include <AT89X52.h>
   2          #define uchar unsigned char
   3          #define uint unsigned int    //宏定义
   4          #define KEY P3_7      //定义画面切换按键
   5          uchar KY;    //KY作用在后面说明     
   6          uchar disp;     //显示汉字指针
   7          uchar pic=0,num=0;     //pic为按键次数；num为中断次数
   8          
   9          
  10          uchar code love[] = {
  11          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  12          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x3F,0x00,0x20,0x00,0x20,0x00,0x20,
  13          0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0x0F,
  14          0x04,0x10,0x02,0x20,0x02,0x20,0x02,0x20,0x02,0x20,0x04,0x10,0xF8,0x0F,0x00,0x00,
  15          0x00,0x00,0x00,0x00,0xFE,0x07,0x00,0x08,0x00,0x10,0x00,0x20,0x00,0x20,0x00,0x10,
  16          0x00,0x08,0xFE,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x3F,0x82,0x20,0x82,0x20,
  17          0x82,0x20,0x82,0x20,0x82,0x20,0x82,0x20,0x82,0x20,0x00,0x00,0x00,0x00,0x00,0x00,
  18          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*LOVE*/
  19          };
  20          
  21          
  22          uchar code loveyou[] = {
  23          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  24          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  25          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  26          0x78,0x00,0xFC,0x00,0xFE,0x01,0xFE,0x03,0xFE,0x07,0xFE,0x0F,0xFE,0x1F,0xFC,0x3F,
  27          0xF8,0x7F,0xFC,0x3F,0xFE,0x1F,0xFE,0x0F,0xFE,0x07,0xFE,0x03,0xFE,0x01,0xFC,0x00,
  28          0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  29          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  30          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*心形图案*/
  31          };
  32          
  33          uchar code hehe[] = {
  34          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  35          0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x01,0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
  36          0xF0,0x0F,0x08,0x10,0x04,0x20,0x00,0x00,0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
  37          0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x20,
  38          0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
  39          0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,0x00,0x00,0x00,0x00,0x04,0x20,0x08,0x10,
  40          0xF0,0x0F,0x00,0x00,0x00,0x00,0xC0,0x01,0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
  41          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*呵呵o(∩_∩)o图案*/
  42          };
  43          
  44          unsigned char code hanzi[] = {
  45          0x00,0x01,0x80,0x40,0x60,0x40,0x1E,0x41,
  46          0x10,0x41,0x10,0x41,0x10,0x41,0x10,0x41,
  47          0xFF,0x7F,0x12,0x41,0x10,0x41,0x10,0x41,
  48          0x98,0x41,0x10,0x61,0x00,0x40,0x00,0x00,/*"生",0*/
  49          0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x3F,
  50          0x42,0x10,0x42,0x10,0x42,0x10,0x42,0x10,
  51          0x42,0x10,0x42,0x10,0x42,0x10,0xFE,0x3F,
  52          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"日",1*/
  53          0x70,0x00,0x00,0x00,0xFF,0xFF,0x08,0x00,
  54          0xB0,0x80,0x88,0x40,0x88,0x30,0x88,0x0E,
  55          0xFF,0x01,0x88,0x06,0x88,0x08,0x88,0x30,
C51 COMPILER V7.06   TEXT1                                                                 03/04/2013 08:31:57 PAGE 2   

  56          0xF8,0x60,0x80,0xC0,0x80,0x40,0x00,0x00,/*"快",2*/
  57          0x00,0x00,0x00,0x20,0x40,0x18,0xFC,0x0C,
  58          0x44,0x07,0x44,0x12,0x44,0x20,0x46,0x40,
  59          0xFA,0x3F,0x42,0x00,0x43,0x00,0x43,0x02,
  60          0x42,0x0C,0x40,0x38,0x00,0x10,0x00,0x00,/*"乐",3*/
  61          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  62          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*" ",4*/
  63          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  64          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*" ",5*/
  65          0x10,0x20,0x08,0x38,0x08,0x26,0x08,0x21,
  66          0xC8,0x20,0x38,0x20,0x08,0x18,0x00,0x00,/*"Z",6*/
  67          0x08,0x20,0xF8,0x3F,0x08,0x20,0x00,0x20,
  68          0x00,0x20,0x00,0x20,0x00,0x30,0x00,0x00,/*"L",7*/
  69          0x08,0x20,0x18,0x30,0x68,0x2C,0x80,0x03,
  70          0x80,0x03,0x68,0x2C,0x18,0x30,0x08,0x20,/*"X",8*/
  71          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  72          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*" ",9*/
  73          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  74          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*" ",10*/
  75          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  76          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*" ",11*/
  77          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  78          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*" ",10*/
  79          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  80          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*" ",11*/
  81          0x00,0x00,0x10,0x20,0x10,0x20,0xF8,0x3F,
  82          0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,/*"1",12*/
  83          0x00,0x00,0x30,0x18,0x08,0x20,0x88,0x20,
  84          0x88,0x20,0x48,0x11,0x30,0x0E,0x00,0x00,/*"3",13*/
  85          0x00,0x00,0x10,0x20,0x10,0x20,0xF8,0x3F,
  86          0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,/*"1",14*/
  87          0x00,0x00,0x00,0x07,0xC0,0x04,0x20,0x24,
  88          0x10,0x24,0xF8,0x3F,0x00,0x24,0x00,0x00,/*"4",15*/
  89          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  90          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*" ",10*/
  91          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  92          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*" ",11*/
  93          };
  94          
  95          /*****函数声明*****/
  96          void display1_ltor(void);
  97          void display2_ltor(void);
  98          void display2_rtol(void);
  99          void display3(void);
 100          void display4(void);
 101          
 102          
 103          
 104          
 105          
 106          
 107          /*****n（us）延时子程序*****/
 108          void DelayUs(uint N)
 109          {
 110   1       uint x;
 111   1       for(x=0; x<=N;x++);
 112   1      }
 113          
 114          /*****中断服务程序*****/
 115          void intersvr0(void) interrupt 0 
 116          {
 117   1       ;
C51 COMPILER V7.06   TEXT1                                                                 03/04/2013 08:31:57 PAGE 3   

 118   1       KY=~KY;      //每个摇动来回水银开关会在摆幅两端分别产生下降沿中断，只提取其中一次（从左向右摇才显示）
 119   1       if(KY==0)
 120   1       {
 121   2         num++;     //计算中断次数
 122   2         switch(pic)      //选择画面
 123   2         {
 124   3              case 0:{display1_ltor();}break;
 125   3          case 1:{display2_ltor();}break;
 126   3          case 2:{display3();}break;
 127   3          case 3:{display4();}break;
 128   3          default:{display1_ltor();}  
 129   3         }
 130   2       }
 131   1      
 132   1      }
 133          /*****显示子程序1（汉字）*****/
 134          void display1_ltor(void)
 135          {
 136   1       uchar i;
 137   1       if(num>10){disp++;num=0;}     //12个汉字分为3次显示完（每次显示4个），每中断10次切换
 138   1       if(disp>2)disp=0;
 139   1        DelayUs(5200);     //此处延时时间依各硬件差别而各不相同，试着调整使得显示内容居中即可
 140   1       for(i=0;i<64;i++)
 141   1       {
 142   2           P0=~hanzi[disp*128+i*2];
 143   2           P2=~hanzi[disp*128+i*2+1];
 144   2           DelayUs(100);
 145   2       }
 146   1      }
 147          
 148          /*****显示子程序2（LOVE）*****/
 149          void display2_ltor(void)
 150          {
 151   1       uchar i;
 152   1       DelayUs(4000);
 153   1       for(i=0;i<64;i++) 
 154   1       {
 155   2           P0=~love[i*2];
 156   2           P2=~love[i*2+1];
 157   2           DelayUs(140);
 158   2       }
 159   1      }
 160          /*****显示子程序3（心形图案）*****/
 161          void display3(void)
 162          {
 163   1       uchar i;
 164   1        DelayUs(4000);
 165   1       for(i=0;i<64;i++)
 166   1       {
 167   2           P0=~loveyou[i*2];
 168   2           P2=~loveyou[i*2+1];
 169   2           DelayUs(120);
 170   2       }
 171   1      }
 172          
 173          /*****显示子程序4（呵呵o(∩_∩)o图案）*****/
 174          void display4(void)
 175          {
 176   1       uchar i;
 177   1       DelayUs(4000);
 178   1       for(i=0;i<64;i++)
 179   1       {
C51 COMPILER V7.06   TEXT1                                                                 03/04/2013 08:31:57 PAGE 4   

 180   2           P0=~hehe[i*2];
 181   2           P2=~hehe[i*2+1];
 182   2           DelayUs(120);
 183   2       }
 184   1      }
 185          
 186          /*****主函数*****/
 187          void main(void)
 188          {
 189   1       IT0=1;
 190   1       EX0=1;
 191   1       EA=1;      //开中断，下降沿中断
 192   1       KY=0;
 193   1       KEY=1;
 194   1       while(1)     //主程序中只检测按键
 195   1       {
 196   2        if(KEY==0)     //画面切换键按下
 197   2        {
 198   3           DelayUs(10000);     //按键去抖
 199   3           if(KEY==0);
 200   3           pic++;
 201   3           while(KEY==0);
 202   3        }
 203   2        if(pic>3)pic=0;
 204   2       }
 205   1      }
 206          /*****END*****/
 207          
 208          
 209          
 210          
 211          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    421    ----
   CONSTANT SIZE    =    768    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
