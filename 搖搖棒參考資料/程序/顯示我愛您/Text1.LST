C51 COMPILER V7.06   TEXT1                                                                 01/24/2013 16:44:50 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE TEXT1
OBJECT MODULE PLACED IN Text1.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Text1.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          #include <AT89X52.h>
   2          #define uchar unsigned char
   3          #define uint unsigned int    //宏定义
   4          #define KEY P3_7      //定义画面切换按键
   5          uchar KY;    //KY作用在后面说明     
   6          uchar disp;     //显示汉字指针
   7          uchar pic=0,num=0;     //pic为按键次数；num为中断次数
   8          
   9          
  10          uchar code love[] = {
  11          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  12          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x3F,0x00,0x20,0x00,0x20,0x00,0x20,
  13          0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0x0F,
  14          0x04,0x10,0x02,0x20,0x02,0x20,0x02,0x20,0x02,0x20,0x04,0x10,0xF8,0x0F,0x00,0x00,
  15          0x00,0x00,0x00,0x00,0xFE,0x07,0x00,0x08,0x00,0x10,0x00,0x20,0x00,0x20,0x00,0x10,
  16          0x00,0x08,0xFE,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x3F,0x82,0x20,0x82,0x20,
  17          0x82,0x20,0x82,0x20,0x82,0x20,0x82,0x20,0x82,0x20,0x00,0x00,0x00,0x00,0x00,0x00,
  18          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*LOVE*/
  19          };
  20          
  21          
  22          uchar code loveyou[] = {
  23          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  24          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  25          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  26          0x78,0x00,0xFC,0x00,0xFE,0x01,0xFE,0x03,0xFE,0x07,0xFE,0x0F,0xFE,0x1F,0xFC,0x3F,
  27          0xF8,0x7F,0xFC,0x3F,0xFE,0x1F,0xFE,0x0F,0xFE,0x07,0xFE,0x03,0xFE,0x01,0xFC,0x00,
  28          0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  29          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  30          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*心形图案*/
  31          };
  32          
  33          uchar code hehe[] = {
  34          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  35          0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x01,0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
  36          0xF0,0x0F,0x08,0x10,0x04,0x20,0x00,0x00,0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
  37          0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x20,
  38          0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
  39          0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,0x00,0x00,0x00,0x00,0x04,0x20,0x08,0x10,
  40          0xF0,0x0F,0x00,0x00,0x00,0x00,0xC0,0x01,0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
  41          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*呵呵o(∩_∩)o图案*/
  42          };
  43          
  44          unsigned char code hanzi[] = {
  45             0x20,0x04,0x20,0x04,0x22,0x42,0x22,0x82,
  46             0xFE,0x7F,0x21,0x01,0x21,0x01,0x20,0x10,
  47             0x20,0x10,0xFF,0x08,0x20,0x07,0x22,0x1A,
  48             0xAC,0x21,0x20,0x40,0x20,0xF0,0x00,0x00,/*"我",0*/
  49          
  50             0x00,0x40,0x40,0x20,0xB2,0xA0,0x96,0x90,
  51             0x9A,0x4C,0x92,0x47,0xF6,0x2A,0x9A,0x2A,
  52             0x93,0x12,0x91,0x1A,0x99,0x26,0x97,0x22,
  53             0x91,0x40,0x90,0xC0,0x30,0x40,0x00,0x00,/*"爱",1*/
  54          /* (16 X 16 , 宋体 ) */
  55          
C51 COMPILER V7.06   TEXT1                                                                 01/24/2013 16:44:50 PAGE 2   

  56             0x80,0x00,0x40,0x00,0xF0,0x7F,0x2C,0x00,
  57             0x43,0x10,0x20,0x0C,0x98,0x03,0x0F,0x21,
  58             0x0A,0x40,0xE8,0x3F,0x08,0x00,0x88,0x00,
  59             0x28,0x03,0x1C,0x1C,0x08,0x08,0x00,0x00,/*"你",2*/
  60          /* (16 X 16 , 宋体 ) */
  61          
  62             0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x5F,
  63             0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  64             0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  65             0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"！",3*/
  66          
  67          
  68             0x20,0x04,0x20,0x04,0x22,0x42,0x22,0x82,
  69             0xFE,0x7F,0x21,0x01,0x21,0x01,0x20,0x10,
  70             0x20,0x10,0xFF,0x08,0x20,0x07,0x22,0x1A,
  71             0xAC,0x21,0x20,0x40,0x20,0xF0,0x00,0x00,/*"我",0*/
  72          
  73             0x00,0x40,0x40,0x20,0xB2,0xA0,0x96,0x90,
  74             0x9A,0x4C,0x92,0x47,0xF6,0x2A,0x9A,0x2A,
  75             0x93,0x12,0x91,0x1A,0x99,0x26,0x97,0x22,
  76             0x91,0x40,0x90,0xC0,0x30,0x40,0x00,0x00,/*"爱",1*/
  77          /* (16 X 16 , 宋体 ) */
  78          
  79             0x80,0x00,0x40,0x00,0xF0,0x7F,0x2C,0x00,
  80             0x43,0x10,0x20,0x0C,0x98,0x03,0x0F,0x21,
  81             0x0A,0x40,0xE8,0x3F,0x08,0x00,0x88,0x00,
  82             0x28,0x03,0x1C,0x1C,0x08,0x08,0x00,0x00,/*"你",2*/
  83          /* (16 X 16 , 宋体 ) */
  84          
  85             0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x5F,
  86             0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  87             0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  88             0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"！",3*/
  89          
  90             0x20,0x04,0x20,0x04,0x22,0x42,0x22,0x82,
  91             0xFE,0x7F,0x21,0x01,0x21,0x01,0x20,0x10,
  92             0x20,0x10,0xFF,0x08,0x20,0x07,0x22,0x1A,
  93             0xAC,0x21,0x20,0x40,0x20,0xF0,0x00,0x00,/*"我",0*/
  94          
  95             0x00,0x40,0x40,0x20,0xB2,0xA0,0x96,0x90,
  96             0x9A,0x4C,0x92,0x47,0xF6,0x2A,0x9A,0x2A,
  97             0x93,0x12,0x91,0x1A,0x99,0x26,0x97,0x22,
  98             0x91,0x40,0x90,0xC0,0x30,0x40,0x00,0x00,/*"爱",1*/
  99          /* (16 X 16 , 宋体 ) */
 100          
 101             0x80,0x00,0x40,0x00,0xF0,0x7F,0x2C,0x00,
 102             0x43,0x10,0x20,0x0C,0x98,0x03,0x0F,0x21,
 103             0x0A,0x40,0xE8,0x3F,0x08,0x00,0x88,0x00,
 104             0x28,0x03,0x1C,0x1C,0x08,0x08,0x00,0x00,/*"你",2*/
 105          /* (16 X 16 , 宋体 ) */
 106          
 107             0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x5F,
 108             0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 109             0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 110             0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"！",3*/
 111          };
 112          
 113          /*****函数声明*****/
 114          void display1_ltor(void);
 115          void display2_ltor(void);
 116          void display2_rtol(void);
 117          void display3(void);
C51 COMPILER V7.06   TEXT1                                                                 01/24/2013 16:44:50 PAGE 3   

 118          void display4(void);
 119          
 120          
 121          
 122          
 123          
 124          
 125          /*****n（us）延时子程序*****/
 126          void DelayUs(uint N)
 127          {
 128   1       uint x;
 129   1       for(x=0; x<=N;x++);
 130   1      }
 131          
 132          /*****中断服务程序*****/
 133          void intersvr0(void) interrupt 0 
 134          {
 135   1       ;
 136   1       KY=~KY;      //每个摇动来回水银开关会在摆幅两端分别产生下降沿中断，只提取其中一次（从左向右摇才显示）
 137   1       if(KY==0)
 138   1       {
 139   2         num++;     //计算中断次数
 140   2         switch(pic)      //选择画面
 141   2         {
 142   3              case 0:{display1_ltor();}break;
 143   3          case 1:{display2_ltor();}break;
 144   3          case 2:{display3();}break;
 145   3          case 3:{display4();}break;
 146   3          default:{display1_ltor();}  
 147   3         }
 148   2       }
 149   1      
 150   1      }
 151          /*****显示子程序1（汉字）*****/
 152          void display1_ltor(void)
 153          {
 154   1       uchar i;
 155   1       if(num>10){disp++;num=0;}     //12个汉字分为3次显示完（每次显示4个），每中断10次切换
 156   1       if(disp>2)disp=0;
 157   1        DelayUs(5200);     //此处延时时间依各硬件差别而各不相同，试着调整使得显示内容居中即可
 158   1       for(i=0;i<64;i++)
 159   1       {
 160   2           P0=~hanzi[disp*128+i*2];
 161   2           P2=~hanzi[disp*128+i*2+1];
 162   2           DelayUs(100);
 163   2       }
 164   1      }
 165          
 166          /*****显示子程序2（LOVE）*****/
 167          void display2_ltor(void)
 168          {
 169   1       uchar i;
 170   1       DelayUs(4000);
 171   1       for(i=0;i<64;i++) 
 172   1       {
 173   2           P0=~love[i*2];
 174   2           P2=~love[i*2+1];
 175   2           DelayUs(140);
 176   2       }
 177   1      }
 178          /*****显示子程序3（心形图案）*****/
 179          void display3(void)
C51 COMPILER V7.06   TEXT1                                                                 01/24/2013 16:44:50 PAGE 4   

 180          {
 181   1       uchar i;
 182   1        DelayUs(4000);
 183   1       for(i=0;i<64;i++)
 184   1       {
 185   2           P0=~loveyou[i*2];
 186   2           P2=~loveyou[i*2+1];
 187   2           DelayUs(120);
 188   2       }
 189   1      }
 190          
 191          /*****显示子程序4（呵呵o(∩_∩)o图案）*****/
 192          void display4(void)
 193          {
 194   1       uchar i;
 195   1       DelayUs(4000);
 196   1       for(i=0;i<64;i++)
 197   1       {
 198   2           P0=~hehe[i*2];
 199   2           P2=~hehe[i*2+1];
 200   2           DelayUs(120);
 201   2       }
 202   1      }
 203          
 204          /*****主函数*****/
 205          void main(void)
 206          {
 207   1       IT0=1;
 208   1       EX0=1;
 209   1       EA=1;      //开中断，下降沿中断
 210   1       KY=0;
 211   1       KEY=1;
 212   1       while(1)     //主程序中只检测按键
 213   1       {
 214   2        if(KEY==0)     //画面切换键按下
 215   2        {
 216   3           DelayUs(10000);     //按键去抖
 217   3           if(KEY==0);
 218   3           pic++;
 219   3           while(KEY==0);
 220   3        }
 221   2        if(pic>3)pic=0;
 222   2       }
 223   1      }
 224          /*****END*****/
 225          
 226          
 227          
 228          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    421    ----
   CONSTANT SIZE    =    768    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
