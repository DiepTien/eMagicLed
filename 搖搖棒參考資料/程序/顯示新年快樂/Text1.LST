C51 COMPILER V7.06   TEXT1                                                                 01/21/2013 18:12:57 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE TEXT1
OBJECT MODULE PLACED IN Text1.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Text1.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          #include <AT89X52.h>
   2          #define uchar unsigned char
   3          #define uint unsigned int    //宏定义
   4          #define KEY P3_7      //定义画面切换按键
   5          uchar KY;    //KY作用在后面说明     
   6          uchar disp;     //显示汉字指针
   7          uchar pic=0,num=0;     //pic为按键次数；num为中断次数
   8          
   9          
  10          
  11          uchar code love[] = {
  12          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  13          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x3F,0x00,0x20,0x00,0x20,0x00,0x20,
  14          0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0x0F,
  15          0x04,0x10,0x02,0x20,0x02,0x20,0x02,0x20,0x02,0x20,0x04,0x10,0xF8,0x0F,0x00,0x00,
  16          0x00,0x00,0x00,0x00,0xFE,0x07,0x00,0x08,0x00,0x10,0x00,0x20,0x00,0x20,0x00,0x10,
  17          0x00,0x08,0xFE,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x3F,0x82,0x20,0x82,0x20,
  18          0x82,0x20,0x82,0x20,0x82,0x20,0x82,0x20,0x82,0x20,0x00,0x00,0x00,0x00,0x00,0x00,
  19          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*LOVE*/
  20          };
  21          
  22          
  23          uchar code loveyou[] = {
  24          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  25          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  26          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  27          0x78,0x00,0xFC,0x00,0xFE,0x01,0xFE,0x03,0xFE,0x07,0xFE,0x0F,0xFE,0x1F,0xFC,0x3F,
  28          0xF8,0x7F,0xFC,0x3F,0xFE,0x1F,0xFE,0x0F,0xFE,0x07,0xFE,0x03,0xFE,0x01,0xFC,0x00,
  29          0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  30          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  31          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*心形图案*/
  32          };
  33          
  34          uchar code hehe[] = {
  35          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  36          0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x01,0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
  37          0xF0,0x0F,0x08,0x10,0x04,0x20,0x00,0x00,0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
  38          0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x20,
  39          0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
  40          0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,0x00,0x00,0x00,0x00,0x04,0x20,0x08,0x10,
  41          0xF0,0x0F,0x00,0x00,0x00,0x00,0xC0,0x01,0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
  42          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*呵呵o(∩_∩)o图案*/
  43          };
  44          
  45          unsigned char code hanzi[] = {
  46          
  47             0x40,0x00,0x42,0x00,0xCC,0x3F,0x04,0x50,
  48             0x00,0x29,0xFC,0x11,0x56,0x4D,0x55,0x83,
  49             0xFC,0x7F,0x50,0x00,0x90,0x41,0x10,0x80,
  50             0xFF,0x7F,0x10,0x00,0x10,0x00,0x00,0x00,/*"谢",0*/
  51          
  52          
  53             0x40,0x00,0x42,0x00,0xCC,0x3F,0x04,0x50,
  54             0x00,0x29,0xFC,0x11,0x56,0x4D,0x55,0x83,
  55             0xFC,0x7F,0x50,0x00,0x90,0x41,0x10,0x80,
C51 COMPILER V7.06   TEXT1                                                                 01/21/2013 18:12:57 PAGE 2   

  56             0xFF,0x7F,0x10,0x00,0x10,0x00,0x00,0x00,/*"谢",1*/
  57          
  58          
  59             0x80,0x00,0x40,0x00,0xF0,0x7F,0x2C,0x00,
  60             0x43,0x10,0x20,0x0C,0x98,0x03,0x0F,0x21,
  61             0x0A,0x40,0xE8,0x3F,0x08,0x00,0x88,0x00,
  62             0x28,0x03,0x1C,0x1C,0x08,0x08,0x00,0x00,/*"你",2*/
  63          
  64             0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x5F,
  65                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  66                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  67                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"！",0*/
  68          
  69             0x00,0x20,0x40,0x20,0x40,0x10,0x48,0x0C,
  70             0x48,0x03,0xC8,0x40,0x09,0x80,0xFA,0x7F,
  71             0x46,0x00,0x80,0x00,0x40,0x03,0x20,0x04,
  72             0x30,0x08,0x00,0x10,0x00,0x10,0x00,0x00,/*"永",3*/
  73          
  74             0x44,0x00,0x44,0x80,0x44,0x40,0x44,0x20,
  75             0x44,0x18,0xDF,0x07,0x44,0x02,0x54,0x02,
  76             0x64,0x42,0x44,0x82,0x5F,0x42,0x44,0x3E,
  77             0x44,0x00,0x44,0x00,0x44,0x00,0x00,0x00,/*"芳",4*/
  78          
  79             0x20,0x00,0x20,0x80,0x20,0x40,0x20,0x20,
  80             0x20,0x10,0x20,0x0C,0xA0,0x03,0x7F,0x00,
  81             0xA0,0x01,0x20,0x06,0x20,0x08,0x20,0x30,
  82             0x20,0x60,0x20,0xC0,0x20,0x40,0x00,0x00,/*"大",5*/
  83          
  84             0x00,0x01,0x02,0x01,0x02,0x01,0x7A,0x3D,
  85             0x2A,0x15,0x2A,0x15,0x2A,0x15,0x2A,0x15,
  86             0x7A,0x3D,0x02,0x41,0x02,0x81,0x7E,0x7F,
  87             0x02,0x01,0x82,0x01,0x00,0x01,0x00,0x00,/*"哥",6*/
  88          
  89             0x20,0x21,0x24,0x11,0x2C,0x4D,0x35,0x81,
  90             0xE6,0x7F,0x34,0x05,0x2C,0x59,0x24,0x21,
  91             0x00,0x18,0xFC,0x07,0x24,0x00,0x24,0x00,
  92             0xE2,0xFF,0x22,0x00,0x22,0x00,0x00,0x00,/*"新",7*/
  93          
  94             0x40,0x04,0x20,0x04,0x10,0x04,0x0C,0x04,
  95             0xE3,0x07,0x22,0x04,0x22,0x04,0x22,0x04,
  96             0xFE,0xFF,0x22,0x04,0x22,0x04,0x22,0x04,
  97             0x22,0x04,0x02,0x04,0x00,0x04,0x00,0x00,/*"年",8*/
  98          
  99             0x70,0x00,0x00,0x00,0xFF,0xFF,0x08,0x00,
 100             0xB0,0x80,0x88,0x40,0x88,0x30,0x88,0x0E,
 101             0xFF,0x01,0x88,0x06,0x88,0x08,0x88,0x30,
 102             0xF8,0x60,0x80,0xC0,0x80,0x40,0x00,0x00,/*"快",9*/
 103          
 104             0x00,0x00,0x00,0x20,0x40,0x18,0xFC,0x0C,
 105             0x44,0x07,0x44,0x12,0x44,0x20,0x46,0x40,
 106             0xFA,0x3F,0x42,0x00,0x43,0x00,0x43,0x02,
 107             0x42,0x0C,0x40,0x38,0x00,0x10,0x00,0x00,/*"乐",10*/
 108          };
 109          
 110          
 111          /*****函数声明*****/
 112          void display1_ltor(void);
 113          void display2_ltor(void);
 114          void display2_rtol(void);
 115          void display3(void);
 116          void display4(void);
 117          
C51 COMPILER V7.06   TEXT1                                                                 01/21/2013 18:12:57 PAGE 3   

 118          
 119          
 120          
 121          
 122          
 123          /*****n（us）延时子程序*****/
 124          void DelayUs(uint N)
 125          {
 126   1       uint x;
 127   1       for(x=0; x<=N;x++);
 128   1      }
 129          
 130          /*****中断服务程序*****/
 131          void intersvr0(void) interrupt 0 
 132          {
 133   1       ;
 134   1       KY=~KY;      //每个摇动来回水银开关会在摆幅两端分别产生下降沿中断，只提取其中一次（从左向右摇才显示）
 135   1       if(KY==0)
 136   1       {
 137   2         num++;     //计算中断次数
 138   2         switch(pic)      //选择画面
 139   2         {
 140   3          case 0:{display1_ltor();}break;
 141   3          case 1:{display2_ltor();}break;
 142   3          case 2:{display3();}break;
 143   3          case 3:{display4();}break;
 144   3          default:{display1_ltor();}  
 145   3         }
 146   2       }
 147   1      
 148   1      }
 149          /*****显示子程序1（汉字）*****/
 150          void display1_ltor(void)
 151          {
 152   1       uchar i;
 153   1       if(num>10){disp++;num=0;}     //每中断10次切换
 154   1       if(disp>2)disp=0;
 155   1        DelayUs(5200);     //此处延时时间依各硬件差别而各不相同，试着调整使得显示内容居中即可
 156   1       for(i=0;i<64;i++)
 157   1       {
 158   2           P0=~hanzi[disp*128+i*2];
 159   2           P2=~hanzi[disp*128+i*2+1];
 160   2           DelayUs(100);
 161   2       }
 162   1      }
 163          
 164          /*****显示子程序2（LOVE）*****/
 165          void display2_ltor(void)
 166          {
 167   1       uchar i;
 168   1       DelayUs(4000);
 169   1       for(i=0;i<64;i++) 
 170   1       {
 171   2           P0=~love[i*2];
 172   2           P2=~love[i*2+1];
 173   2           DelayUs(140);
 174   2       }
 175   1      }
 176          /*****显示子程序3（心形图案）*****/
 177          void display3(void)
 178          {
 179   1       uchar i;
C51 COMPILER V7.06   TEXT1                                                                 01/21/2013 18:12:57 PAGE 4   

 180   1        DelayUs(4000);
 181   1       for(i=0;i<64;i++)
 182   1       {
 183   2           P0=~loveyou[i*2];
 184   2           P2=~loveyou[i*2+1];
 185   2           DelayUs(120);
 186   2       }
 187   1      }
 188          
 189          /*****显示子程序4（呵呵o(∩_∩)o图案）*****/
 190          void display4(void)
 191          {
 192   1       uchar i;
 193   1       DelayUs(4000);
 194   1       for(i=0;i<64;i++)
 195   1       {
 196   2           P0=~hehe[i*2];
 197   2           P2=~hehe[i*2+1];
 198   2           DelayUs(120);
 199   2       }
 200   1      }
 201          
 202          /*****主函数*****/
 203          void main(void)
 204          {
 205   1       IT0=1;
 206   1       EX0=1;
 207   1       EA=1;      //开中断，下降沿中断
 208   1       KY=0;
 209   1       while(1)     //主程序中只检测按键
 210   1       {
 211   2        if(KEY==0)     //画面切换键按下
 212   2        {
 213   3        DelayUs(10000);     //按键去抖
 214   3        if(KEY==0);
 215   3        pic++;}
 216   2        if(pic>3)pic=0;
 217   2       }
 218   1      }
 219          /*****END*****/
 220          
 221          
 222          
 223          
 224          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    416    ----
   CONSTANT SIZE    =    768    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
